# GenAI-2-19
Task GenAI-2-19

# GenAI-2-19 — Генерация кода с проверкой синтаксиса

## Цель работы
Реализовать генерацию Python-кода на основе текстового запроса с использованием модели искусственного интеллекта, проверить синтаксическую корректность сгенерированного кода и выполнить его в изолированной среде.  
Работа выполнена в рамках курса «Генеративный искусственный интеллект», задание GenAI-2-19.

---

## Краткое описание
Модуль использует предобученную модель [Salesforce/codegen-350M-mono](https://huggingface.co/Salesforce/codegen-350M-mono) из библиотеки `transformers`.  
Модель принимает текстовый промпт (например, «напиши функцию, которая считает факториал») и генерирует соответствующий Python-код.  

Далее код проходит два уровня проверки:
1. Синтаксический анализ — модуль `ast` проверяет, что код компилируется без `SyntaxError`.
2. Исполнение — код выполняется через `exec()` в блоке `try-except`, чтобы убедиться, что он действительно работает.

---

## Используемая модель
- Название: `Salesforce/codegen-350M-mono`  
- Размер: ~800 МБ  
- Тип: `AutoModelForCausalLM`  
- Назначение: генерация кода на Python  
- Источник: [Hugging Face Hub](https://huggingface.co/Salesforce/codegen-350M-mono)

---

## Структура проекта
```

GenAI-2-19/
│
├── main.py    — загрузка модели, токенизатора и генерация кода
├── tests.py   — тестирование синтаксиса и выполнения кода
└── README.md  — описание проекта

````

---

## Установка окружения

### 1. Клонировать или скачать проект
```bash
cd ~/Desktop/Project
````

### 2. Создать виртуальное окружение

```bash
sudo apt install python3-venv python3-pip -y
python3 -m venv .venv
source .venv/bin/activate
```

### 3. Установить зависимости

```bash
pip install torch transformers
```

---

## Запуск проекта

```bash
python3 tests.py
```

При первом запуске модель (~797 МБ) будет автоматически загружена из Hugging Face Hub и сохранена в кэш
`~/.cache/huggingface/hub/`.

---

## Пример работы

```
---------------- Начало тестов ----------------

промпт: напиши функцию, которая выводит 'hello, world'
код успешно выполнен

промпт: напиши функцию, которая считает факториал
код успешно выполнен

промпт: напиши функцию, которая проверяет число на простоту
код успешно выполнен

---------------- Все тесты пройдены успешно ----------------
```

---

## Метрики и результаты

| Метрика                     | Описание                     | Результат                           |
| --------------------------- | ---------------------------- | ----------------------------------- |
| Синтаксическая корректность | Проверка через `ast.parse()` | 3/3 кода без SyntaxError            |
| Исполнимость                | Проверка через `exec()`      | Все три примера успешно выполняются |
| Baseline                    | Код выполняется без ошибок   | Достигнут                           |

---

## Принцип работы

1. Пользователь задает текстовый запрос (prompt).
2. Модель CodeGen генерирует продолжение текста в виде Python-кода.
3. Функция `test_code_syntax()` проверяет код через `ast.parse`.
4. Функция `test_exec()` выполняет код в `exec()` и отслеживает исключения.
5. При успешной генерации выводится результат, код считается корректным.

---

## Зависимости

* Python ≥ 3.9
* torch
* transformers
* ast (встроенный модуль Python)

---

## Пример установки зависимостей

```bash
pip freeze > requirements.txt
```

Файл можно использовать для развёртывания проекта в другой среде.

---

## Возможные улучшения

* Добавить повторную генерацию при ошибках (`SyntaxError`, `RuntimeError`)
* Ввести метрику точности по нескольким промптам
* Сохранять успешные коды в файл `output.py`
* Реализовать веб-интерфейс на Streamlit или Gradio

---

## Вывод

В результате выполнения задания GenAI-2-19 реализована система генерации Python-кода с проверкой синтаксиса и выполнением кода в изолированной среде.
Полученный результат соответствует базовому уровню (baseline): сгенерированный код компилируется и выполняется без ошибок.

```

---

Хочешь, чтобы я сразу подготовил этот текст в `.md`-файле (готовом для загрузки в GitHub или Moodle)?
```
